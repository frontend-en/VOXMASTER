import{j as e,r as t}from"./vendor-D3fqJ04X.js";import{c as r,C as n,a as s}from"./index-DMVkXVKI.js";import{u as a,v as i,w as o,x as l,y as c}from"./radix-BsuV7B7a.js";import{k as d,i as u,h as m,l as h,m as f}from"./icons-qjMv7rqI.js";import{t as x}from"./consts-nynlNN6a.js";import"./motion-BsLEmaHq.js";function w({className:t,children:n,...s}){return e.jsxs(a,{"data-slot":"scroll-area",className:r("relative",t),...s,children:[e.jsx(i,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),e.jsx(p,{}),e.jsx(o,{})]})}function p({className:t,orientation:n="vertical",...s}){return e.jsx(l,{"data-slot":"scroll-area-scrollbar",orientation:n,className:r("flex touch-none p-px transition-colors select-none","vertical"===n&&"h-full w-2.5 border-l border-l-transparent","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:e.jsx(c,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function v(){const r=t.useRef(null),[a,i]=t.useState(!1),[o,l]=t.useState(0),[c,p]=t.useState(0),v=t.useRef(null),[b,g]=t.useState(new Set),j=t.useRef([]),[y,N]=t.useState(()=>Array(x.length).fill(!1)),W=()=>r.current?.querySelector("[data-radix-scroll-area-viewport]"),E=()=>{const e=W();if(!e)return window.innerWidth<640?Math.max(350,window.innerWidth-16):window.innerWidth<768?674:window.innerWidth<1024?704:window.innerWidth<1280?744:(window.innerWidth,774);const t=e.querySelectorAll("[data-card]");if(t.length>1){const e=t[0];return t[1].offsetLeft-e.offsetLeft}return window.innerWidth<640?Math.max(350,window.innerWidth-16):window.innerWidth<768?674:window.innerWidth<1024?704:window.innerWidth<1280?744:(window.innerWidth,774)},k=()=>{const e=W(),t=x.length;if(!e)return window.innerWidth<640?t:(window.innerWidth<768||window.innerWidth<1024||window.innerWidth<1280||window.innerWidth,Math.max(1,t));const r=e.clientWidth,n=E();if(0===n||0===r)return Math.max(1,t);const s=r/n;if(s<1.05)return t;const a=Math.floor(s),i=Math.max(1,t-a+1);return Math.min(i,t)},[A,M]=t.useState(1),S=e=>{const t=W(),r=k();if(!t||e<0||e>=r)return;v.current&&clearTimeout(v.current),T(),i(!0),l(e),i(!0),l(e);const n=e*E(),s=t.scrollWidth-t.clientWidth,a=Math.min(n,s);T(),t.scrollTo({left:a,behavior:"smooth"}),v.current=setTimeout(()=>{i(!1)},7e3)},T=()=>{g(new Set),(()=>{const e=W();if(!e)return;e.querySelectorAll("[data-card]").forEach(e=>{e.style.height="",e.style.maxHeight="",e.removeAttribute("data-expanded")})})()};t.useEffect(()=>{if(a)return;const e=setInterval(()=>{const e=W();if(!e)return;const t=E(),r=k(),n=e.scrollWidth-e.clientWidth;r!==A&&M(r);const s=(o+1)%r,a=s*t,i=a>=n?0:a;T(),e.scrollTo({left:i,behavior:"smooth"}),l(s)},4e3);return()=>clearInterval(e)},[a,o,A]),t.useEffect(()=>{const e=W();if(!e)return;let t;const r=()=>{clearTimeout(t),t=setTimeout(()=>{(e=>{if(a)return;const t=E(),r=k(),n=Math.round(e/t),s=Math.max(0,Math.min(n,r-1));s!==o&&(T(),l(s))})(e.scrollLeft)},100)};return e.addEventListener("scroll",r,{passive:!0}),()=>{e.removeEventListener("scroll",r),clearTimeout(t)}},[o,a]),t.useEffect(()=>{const e=()=>{setTimeout(()=>{const e=k();M(e),o>=e&&l(0),p(e=>e+1)},100)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]),t.useEffect(()=>{const e=setTimeout(()=>{const e=k();M(e)},100);return()=>clearTimeout(e)},[]),t.useEffect(()=>{const e=k();e!==A&&M(e)},[c]),t.useEffect(()=>{const e=()=>{N(x.map((e,t)=>{const r=j.current[t];return!!r&&r.scrollHeight-r.clientHeight>1}))},t=requestAnimationFrame(e),r=()=>requestAnimationFrame(e);window.addEventListener("resize",r);const n=[];j.current.forEach(t=>{if(!t)return;const r=new ResizeObserver(()=>e());r.observe(t),n.push(r)});const s=setTimeout(e,250);return()=>{cancelAnimationFrame(t),clearTimeout(s),window.removeEventListener("resize",r),n.forEach(e=>e.disconnect())}},[x.length,o,c,b]),t.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const L=()=>{const e=k();S((o-1+e)%e)},D=()=>{const e=k();S((o+1)%e)};return e.jsx("section",{className:"py-8 lg:py-24 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"mb-4 mx-auto",children:"Отзывы учеников"}),e.jsx("p",{className:"text-muted-foreground mx-auto",children:"Что говорят о занятиях мои ученики"})]}),e.jsx("div",{ref:r,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"testimonials-container mx-auto px-2",children:e.jsx(w,{className:"w-full",children:e.jsx("div",{className:"flex space-x-6 pb-4",children:x.map((t,r)=>e.jsx(n,{"data-card":!0,className:"testimonial-card flex-shrink-0",children:e.jsxs(s,{className:"p-8 sm:p-9 md:p-10 testimonial-card-content",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-5",children:[...Array(t.rating)].map((t,r)=>e.jsx(d,{className:"h-6 w-6 fill-yellow-400 text-yellow-400"},r))}),e.jsxs("div",{className:"testimonial-text",children:[e.jsxs("div",{className:"mb-6 ml-2",children:[e.jsx("p",{id:`testimonial-text-${r}`,ref:e=>{j.current[r]=e},className:"text-base text-sm lg:text-lg leading-relaxed "+(b.has(r)?"":"line-clamp-4"),children:t.text}),(y[r]||b.has(r))&&e.jsx("button",{onClick:()=>(e=>{g(t=>{const r=new Set(t),n=r.has(e),s=W(),a=s?.querySelectorAll("[data-card]")?.[e];return a&&(n?(a.removeAttribute("data-expanded"),a.style.maxHeight=""):(a.setAttribute("data-expanded","true"),a.style.maxHeight="")),n?r.delete(e):r.add(e),r})})(r),className:"testimonial-expand-btn mt-3 text-sm text-primary hover:text-primary/80 focus:text-primary/80 transition-colors duration-200 flex items-center gap-2 group !mx-3","aria-expanded":b.has(r),"aria-controls":`testimonial-text-${r}`,"aria-label":b.has(r)?"Скрыть полный текст отзыва":"Показать полный текст отзыва",children:b.has(r)?e.jsxs(e.Fragment,{children:["Показать меньше",e.jsx(u,{className:"h-4 w-4 transition-transform duration-200 group-hover:-translate-y-0.5"})]}):e.jsxs(e.Fragment,{children:["Показать больше",e.jsx(m,{className:"h-4 w-4 transition-transform duration-200 group-hover:translate-y-0.5"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm lg:text-lg  text-muted-foreground mt-auto pt-5 border-t border-border/30",children:[e.jsx("span",{children:t.name}),e.jsx("span",{children:t.date})]})]})]})},r))})})}),A>1&&e.jsx("div",{className:"mt-8 sm:mt-12 flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3",role:"group","aria-label":"Навигация отзывов",children:[e.jsxs("button",{type:"button",onClick:L,onKeyDown:e=>{"ArrowLeft"===e.key&&(e.preventDefault(),L()),"ArrowRight"===e.key&&(e.preventDefault(),D()),"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),L())},className:"\r\n          h-11 px-4 rounded-full border border-border/60 bg-background/70\r\n          hover:bg-accent hover:text-accent-foreground\r\n          focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background\r\n          active:scale-95 transition\r\n        ","aria-label":"Предыдущий отзыв",children:[e.jsx("span",{className:"sr-only",children:"Назад"}),e.jsx(h,{className:"w-5 h-5","aria-hidden":"true"})]}),e.jsxs("button",{type:"button",onClick:D,onKeyDown:e=>{"ArrowRight"===e.key&&(e.preventDefault(),D()),"ArrowLeft"===e.key&&(e.preventDefault(),L()),"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),D())},className:"\r\n          h-11 px-4 rounded-full border border-border/60 bg-background/70\r\n          hover:bg-accent hover:text-accent-foreground\r\n          focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background\r\n          active:scale-95 transition\r\n        ","aria-label":"Следующий отзыв",children:[e.jsx("span",{className:"sr-only",children:"Вперёд"}),e.jsx(f,{className:"w-5 h-5","aria-hidden":"true"})]})]})})]})})}export{v as Testimonials};
